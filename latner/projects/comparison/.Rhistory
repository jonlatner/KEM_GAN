theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","31","40","50","75","99",NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
df_compare_1_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value<=30 | is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend<=30")
df_compare_2_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value>30) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend>30")
df_compare_1_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value<=30 | is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend<=30")
df_compare_2_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value>30) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend>30")
df_compare_1_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value<=30 | is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend<=30")
df_compare_2_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(value>30) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nofriend>30")
df_compare <- rbind(df_compare_1_synthpop, df_compare_2_synthpop,df_compare_1_ds, df_compare_2_ds,df_compare_1_ctgan,df_compare_2_ctgan)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg, scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","31","40","50","74","99",NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_nofriend_1.pdf"), height = 4, width = 10)
ods <- data.frame(with(df_ods,table(bmi,useNA = "ifany")))
names(ods)[1:2] <- c("value", "freq")
ods$data <- "observed"
sds_ctgan <- data.frame(with(df_ctgan,table(bmi,useNA = "ifany")))
names(sds_ctgan)[1:2] <- c("value", "freq")
sds_ctgan$data <- "ctgan"
sds_datasynthesizer <- data.frame(with(df_datasynthesizer,table(bmi,useNA = "ifany")))
names(sds_datasynthesizer)[1:2] <- c("value", "freq")
sds_datasynthesizer$data <- "datasynthesizer"
sds_synthpop <- data.frame(with(df_synthpop,table(bmi,useNA = "ifany")))
names(sds_synthpop)[1:2] <- c("value", "freq")
sds_synthpop$data <- "synthpop"
df_compare_1_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data))
df_compare_1_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data))
df_compare_1_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data))
df_compare <- rbind(df_compare_1_ds, df_compare_1_ctgan)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~sdg) +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("13","20","25","30","40","50","75",NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_ds_ctgan_bmi_1.pdf"), height = 4, width = 10)
df_compare <- rbind(df_compare_1_ds, df_compare_1_ctgan, df_compare_1_synthpop)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~sdg) +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("13","20","25","30","40","50","75",NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_bmi_1.pdf"), height = 4, width = 10)
ods <- data.frame(with(df_ods,table(wkabdur,useNA = "ifany")))
names(ods)[1:2] <- c("value", "freq")
ods$data <- "observed"
sds_ctgan <- data.frame(with(df_ctgan,table(wkabdur,useNA = "ifany")))
names(sds_ctgan)[1:2] <- c("value", "freq")
sds_ctgan$data <- "ctgan"
sds_datasynthesizer <- data.frame(with(df_datasynthesizer,table(wkabdur,useNA = "ifany")))
names(sds_datasynthesizer)[1:2] <- c("value", "freq")
sds_datasynthesizer$data <- "datasynthesizer"
sds_synthpop <- data.frame(with(df_synthpop,table(wkabdur,useNA = "ifany")))
names(sds_synthpop)[1:2] <- c("value", "freq")
sds_synthpop$data <- "synthpop"
df_compare_1_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_2_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare_1_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_2_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare_1_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_1_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare <- rbind(df_compare_1_ds, df_compare_1_ctgan, df_compare_2_ds, df_compare_2_ctgan)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg,scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","40","50","60", NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
# axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_ds_ctgan_wkabdur_1.pdf"), height = 4, width = 10)
df_compare <- rbind(df_compare_1_ds, df_compare_2_ds, df_compare_1_ctgan, df_compare_2_ctgan, df_compare_1_synthpop, df_compare_2_synthpop)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg,scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","40","50","60", NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
# axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_wkabdur_1.pdf"), height = 4, width = 10)
df_compare_2_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare <- rbind(df_compare_1_ds, df_compare_2_ds, df_compare_1_ctgan, df_compare_2_ctgan, df_compare_1_synthpop, df_compare_2_synthpop)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg,scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","40","50","60", NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
# axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_wkabdur_1.pdf"), height = 4, width = 10)
ods <- data.frame(with(df_ods,table(wkabdur,useNA = "ifany")))
names(ods)[1:2] <- c("value", "freq")
ods$data <- "observed"
sds_ctgan <- data.frame(with(df_ctgan,table(wkabdur,useNA = "ifany")))
names(sds_ctgan)[1:2] <- c("value", "freq")
sds_ctgan$data <- "ctgan"
sds_datasynthesizer <- data.frame(with(df_datasynthesizer,table(wkabdur,useNA = "ifany")))
names(sds_datasynthesizer)[1:2] <- c("value", "freq")
sds_datasynthesizer$data <- "datasynthesizer"
sds_synthpop <- data.frame(with(df_synthpop,table(wkabdur,useNA = "ifany")))
names(sds_synthpop)[1:2] <- c("value", "freq")
sds_synthpop$data <- "synthpop"
df_compare_1_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_2_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare_1_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_2_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare_1_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(!is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "nonmissing")
df_compare_2_synthpop <- rbind(sds_synthpop,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
filter(is.na(value)) %>%
mutate(value = as.factor(value),
sdg = "synthpop",
data = ifelse(data!="observed",yes = "synthetic", no = data),
type = "missing")
df_compare <- rbind(df_compare_1_ds, df_compare_1_ctgan, df_compare_2_ds, df_compare_2_ctgan)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg,scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","40","50","60", NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
# axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_ds_ctgan_wkabdur_1.pdf"), height = 4, width = 10)
df_compare <- rbind(df_compare_1_ds, df_compare_2_ds, df_compare_1_ctgan, df_compare_2_ctgan, df_compare_1_synthpop, df_compare_2_synthpop)
df_graph <- ggplot(df_compare, aes(x = value, y = pct, fill = data)) +
geom_bar(position = position_dodge(width = .9), stat = "identity") +
facet_nested_wrap(~type+sdg,scales = "free") +
xlab("") +
ylab("") +
theme_bw() +
scale_x_discrete(breaks = c("0","10","20","30","40","50","60", NA)) +
theme(panel.grid.minor = element_blank(),
legend.position = "bottom",
legend.key.width=unit(1, "cm"),
# axis.text.x = element_text(angle = 90, vjust = .5),
axis.line.y = element_line(color="black", linewidth=.5),
axis.line.x = element_line(color="black", linewidth=.5)
)
df_graph
ggsave(plot = df_graph, paste0(graphs,"compare_wkabdur_1.pdf"), height = 4, width = 10)
summary(df_synthpop$wkabdur)
summary(df_ods$wkabdur)
summary(df_ctgan$wkabdur)
summary(df_datasynthesizer$wkabdur)
summary(df_datasynthesizer$bmi)
summary(df_ods$bmi)
summary(df_ctgan$bmi)
df_compare_1_ds
ods <- data.frame(with(df_ods,table(bmi,useNA = "ifany")))
names(ods)[1:2] <- c("value", "freq")
ods$data <- "observed"
sds_ctgan <- data.frame(with(df_ctgan,table(bmi,useNA = "ifany")))
names(sds_ctgan)[1:2] <- c("value", "freq")
sds_ctgan$data <- "ctgan"
sds_datasynthesizer <- data.frame(with(df_datasynthesizer,table(bmi,useNA = "ifany")))
names(sds_datasynthesizer)[1:2] <- c("value", "freq")
sds_datasynthesizer$data <- "datasynthesizer"
sds_synthpop <- data.frame(with(df_synthpop,table(bmi,useNA = "ifany")))
names(sds_synthpop)[1:2] <- c("value", "freq")
sds_synthpop$data <- "synthpop"
sds_datasynthesizer
df_compare_1_ds <- rbind(sds_datasynthesizer,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
mutate(value = as.factor(value),
sdg = "datasynthesizer",
data = ifelse(data!="observed",yes = "synthetic", no = data))
df_compare_1_ctgan <- rbind(sds_ctgan,ods)%>%
mutate(value = round(as.numeric(as.character(value))),0) %>%
group_by(data,value) %>%
summarise(total_1 = sum(freq)) %>%
group_by(data) %>%
mutate(total_2 = sum(total_1),
pct = total_1/total_2) %>%
ungroup() %>%
mutate(value = as.factor(value),
sdg = "ctgan",
data = ifelse(data!="observed",yes = "synthetic", no = data))
df_compare_1_ds
View(df_compare_1_ds)
View(df_compare_1_ctgan)
summary(df_ods$wkbdur)
summary(df_ods$wkabdur)
summary(df_datasynthesizer$wkabdur)
summary(df_ctgan$wkabdur)
